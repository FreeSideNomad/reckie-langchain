# Build Health Dashboard

This directory contains the auto-generated build health dashboard published to GitHub Pages.

## 📊 View the Dashboard

**Live Dashboard:** https://FreeSideNomad.github.io/reckie-langchain/

The dashboard displays:
- ✅ Current build status
- 📈 Code coverage metrics (line and branch coverage)
- 🧪 Test results summary
- 📜 Recent build history
- 🔗 Links to detailed HTML coverage reports

## 🔄 How It Works

### 1. CI/CD Pipeline (`.github/workflows/ci.yml`)

On every push to `main` and pull request:
- Runs all tests with pytest
- Generates coverage reports (XML, HTML)
- Uploads artifacts:
  - `coverage.xml` - Coverage metrics
  - `pytest-junit.xml` - Test results
  - `htmlcov/` - HTML coverage report

### 2. Publish Reports Workflow (`.github/workflows/publish-reports.yml`)

Triggered after successful CI/CD run on `main`:
- Downloads test artifacts from CI run
- Runs `scripts/generate-build-health.py` to create dashboard
- Fetches recent GitHub Actions runs via API
- Commits and pushes to `gh-pages` branch

### 3. Build Health Generator (`scripts/generate-build-health.py`)

Python script that:
- Parses `coverage.xml` for coverage metrics
- Parses `pytest-junit.xml` for test results
- Calls GitHub API for build history
- Generates beautiful HTML dashboard
- Outputs to `docs/index.html`

## 🛠️ Local Generation

You can generate the build health page locally:

```bash
# Install dependencies
pip install requests

# Run tests to generate reports
pytest --cov=src --cov-report=xml --cov-report=html --junitxml=pytest-junit.xml

# Generate dashboard
python scripts/generate-build-health.py \
  --coverage coverage.xml \
  --junit pytest-junit.xml \
  --output docs/index.html \
  --repo FreeSideNomad/reckie-langchain \
  --branch main

# View locally
open docs/index.html
```

## 📁 Directory Structure

```
docs/
├── README.md           # This file
├── index.html         # Build health dashboard (auto-generated)
├── coverage/          # HTML coverage reports (auto-generated)
│   ├── index.html
│   └── ...
└── assets/            # Static assets (if needed)
    ├── css/
    └── js/
```

## 🔧 Configuration

### Enable GitHub Pages

1. Go to repository Settings → Pages
2. Source: Deploy from a branch
3. Branch: `gh-pages` / `/ (root)`
4. Save

### GitHub Token Permissions

The `GITHUB_TOKEN` needs:
- `contents: write` - To push to gh-pages branch
- `actions: read` - To download artifacts
- `pages: write` - To deploy to GitHub Pages

These are configured in `.github/workflows/publish-reports.yml`.

## 🎨 Customization

To customize the dashboard appearance, edit `scripts/generate-build-health.py`:

- Modify the `generate_html()` function for layout changes
- Adjust CSS in the `<style>` section
- Add new metrics by parsing additional files
- Integrate with external services (Codecov, etc.)

## 📊 Metrics Displayed

### Coverage Metrics
- **Line Coverage**: Percentage of lines executed during tests
- **Branch Coverage**: Percentage of code branches taken
- **Lines Covered/Valid**: Actual numbers (e.g., 787/879)
- **Branches Covered/Valid**: Actual numbers

### Test Metrics
- **Tests Passed**: Number of passing tests
- **Failures**: Test assertion failures
- **Errors**: Test execution errors
- **Skipped**: Tests skipped (e.g., requires Docker)
- **Duration**: Total test execution time

### Build History
- **Recent Runs**: Last 10 CI/CD runs
- **Status**: Success/Failure/Cancelled
- **Timestamp**: When the build ran
- **Links**: Direct links to GitHub Actions runs

## 🚀 Future Enhancements

Potential improvements:
- 📈 Coverage trend graphs (track over time)
- 🎯 Per-file coverage breakdown
- 📉 Performance metrics (test duration trends)
- 🔔 Notifications for coverage drops
- 🏆 Coverage badges in README
- 📊 Test flakiness detection
- 🔍 Failed test details with stack traces

## 🤖 Automation

The dashboard updates automatically:
- ✅ Every push to `main` branch
- ✅ After successful CI/CD run
- ✅ Approximately 2-3 minutes after tests complete
- ✅ No manual intervention required

---

**Generated by:** Claude Code (LLM Agent)
**Last Updated:** 2025-10-01
