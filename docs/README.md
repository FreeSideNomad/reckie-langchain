# Build Health Dashboard

This directory contains the auto-generated build health dashboard published to GitHub Pages.

## ğŸ“Š View the Dashboard

**Live Dashboard:** https://FreeSideNomad.github.io/reckie-langchain/

The dashboard displays:
- âœ… Current build status
- ğŸ“ˆ Code coverage metrics (line and branch coverage)
- ğŸ§ª Test results summary
- ğŸ“œ Recent build history
- ğŸ”— Links to detailed HTML coverage reports

## ğŸ”„ How It Works

### 1. CI/CD Pipeline (`.github/workflows/ci.yml`)

On every push to `main` and pull request:
- Runs all tests with pytest
- Generates coverage reports (XML, HTML)
- Uploads artifacts:
  - `coverage.xml` - Coverage metrics
  - `pytest-junit.xml` - Test results
  - `htmlcov/` - HTML coverage report

### 2. Publish Reports Workflow (`.github/workflows/publish-reports.yml`)

Triggered after successful CI/CD run on `main`:
- Downloads test artifacts from CI run
- Runs `scripts/generate-build-health.py` to create dashboard
- Fetches recent GitHub Actions runs via API
- Commits and pushes to `gh-pages` branch

### 3. Build Health Generator (`scripts/generate-build-health.py`)

Python script that:
- Parses `coverage.xml` for coverage metrics
- Parses `pytest-junit.xml` for test results
- Calls GitHub API for build history
- Generates beautiful HTML dashboard
- Outputs to `docs/index.html`

## ğŸ› ï¸ Local Generation

You can generate the build health page locally:

```bash
# Install dependencies
pip install requests

# Run tests to generate reports
pytest --cov=src --cov-report=xml --cov-report=html --junitxml=pytest-junit.xml

# Generate dashboard
python scripts/generate-build-health.py \
  --coverage coverage.xml \
  --junit pytest-junit.xml \
  --output docs/index.html \
  --repo FreeSideNomad/reckie-langchain \
  --branch main

# View locally
open docs/index.html
```

## ğŸ“ Directory Structure

```
docs/
â”œâ”€â”€ README.md           # This file
â”œâ”€â”€ index.html         # Build health dashboard (auto-generated)
â”œâ”€â”€ coverage/          # HTML coverage reports (auto-generated)
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ ...
â””â”€â”€ assets/            # Static assets (if needed)
    â”œâ”€â”€ css/
    â””â”€â”€ js/
```

## ğŸ”§ Configuration

### Enable GitHub Pages

1. Go to repository Settings â†’ Pages
2. Source: Deploy from a branch
3. Branch: `gh-pages` / `/ (root)`
4. Save

### GitHub Token Permissions

The `GITHUB_TOKEN` needs:
- `contents: write` - To push to gh-pages branch
- `actions: read` - To download artifacts
- `pages: write` - To deploy to GitHub Pages

These are configured in `.github/workflows/publish-reports.yml`.

## ğŸ¨ Customization

To customize the dashboard appearance, edit `scripts/generate-build-health.py`:

- Modify the `generate_html()` function for layout changes
- Adjust CSS in the `<style>` section
- Add new metrics by parsing additional files
- Integrate with external services (Codecov, etc.)

## ğŸ“Š Metrics Displayed

### Coverage Metrics
- **Line Coverage**: Percentage of lines executed during tests
- **Branch Coverage**: Percentage of code branches taken
- **Lines Covered/Valid**: Actual numbers (e.g., 787/879)
- **Branches Covered/Valid**: Actual numbers

### Test Metrics
- **Tests Passed**: Number of passing tests
- **Failures**: Test assertion failures
- **Errors**: Test execution errors
- **Skipped**: Tests skipped (e.g., requires Docker)
- **Duration**: Total test execution time

### Build History
- **Recent Runs**: Last 10 CI/CD runs
- **Status**: Success/Failure/Cancelled
- **Timestamp**: When the build ran
- **Links**: Direct links to GitHub Actions runs

## ğŸš€ Future Enhancements

Potential improvements:
- ğŸ“ˆ Coverage trend graphs (track over time)
- ğŸ¯ Per-file coverage breakdown
- ğŸ“‰ Performance metrics (test duration trends)
- ğŸ”” Notifications for coverage drops
- ğŸ† Coverage badges in README
- ğŸ“Š Test flakiness detection
- ğŸ” Failed test details with stack traces

## ğŸ¤– Automation

The dashboard updates automatically:
- âœ… Every push to `main` branch
- âœ… After successful CI/CD run
- âœ… Approximately 2-3 minutes after tests complete
- âœ… No manual intervention required

---

**Generated by:** Claude Code (LLM Agent)
**Last Updated:** 2025-10-01
